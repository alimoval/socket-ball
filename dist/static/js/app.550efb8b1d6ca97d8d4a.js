webpackJsonp([1],{NHnr:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=t("7+uW"),i={render:function(){var e=this.$createElement,s=this._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var o=t("VU/8")({name:"App"},i,!1,function(e){t("P+zU")},null,null).exports,a=t("/ocq"),r=t("mvHQ"),c=t.n(r),d={name:"home",data:function(){return{messages:[],userId:"",coordinates:[],newMessage:"",online:!1}},created:function(){this.connect()},destroyed:function(){this.ws.close()},methods:{clickHandler:function(e){var s=this,t=(e=e||window.event).key||e.keyCode||e.code;39!==t&&"ArrowRight"!==t||this.coordinates.forEach(function(e){+e.id===s.userId&&(e.left=parseInt(e.left,10)+10+"",s.ws.send(c()(e)))})},sendMessage:function(){this.ws.send(c()({id:this.userId,type:"message",message:this.newMessage})),this.newMessage=""},messageHandler:function(e){try{var s=JSON.parse(e.data);switch(s.type){case"messages":this.$set(this,"messages",s.messages);break;case"message":this.messages.push(s.message);break;case"memoryInfo":this.$set(this,"memory",s.data);break;case"coordinates":this.coordinates=[],this.$set(this,"coordinates",s.coordinates);break;case"user":this.$set(this,"userId",s.id)}}catch(e){console.error(e)}},disconnect:function(){this.ws.close()},connect:function(){var e=this;if(this.online)return!1;var s=location.origin.replace(/^https/,"wss");this.ws=new WebSocket(s),this.ws.addEventListener("open",function(){e.online=!0}),this.ws.addEventListener("close",function(){e.online=!1}),this.ws.addEventListener("error",function(e){console.error(e)}),this.ws.addEventListener("message",this.messageHandler.bind(this)),window.onkeydown=this.clickHandler.bind(this)}}},l={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[e.memory?t("div",[e._v("\n          "+e._s(e.memory)+"\n      ")]):e._e(),e._v(" "),t("ul",{staticStyle:{"list-style":"none"}},e._l(e.messages,function(s){return t("li",{key:s.id},[e._v("User "+e._s(s.id)+": "+e._s(s.message))])})),e._v(" "),t("div",[e._v("online: "+e._s(e.online))]),e._v(" "),t("form",{on:{submit:function(s){return s.preventDefault(),e.sendMessage(s)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{type:"text"},domProps:{value:e.newMessage},on:{input:function(s){s.target.composing||(e.newMessage=s.target.value)}}}),e._v(" "),t("input",{attrs:{type:"submit",value:"Send"}})]),e._v(" "),t("button",{on:{click:e.disconnect}},[e._v("Disconnect")]),e._v(" "),t("button",{on:{click:e.connect}},[e._v("Connect")]),e._v(" "),t("br"),e._v(" "),t("br"),e._v(" "),t("div",{staticStyle:{"min-height":"300px",width:"100%",background:"black",position:"relative"}},e._l(e.coordinates,function(e){return t("div",{key:e.id,style:"width:19px;height:19px;background:white;position:absolute;left:"+e.left+"px;top:"+e.top+"px;background:"+e.color})}))])])},staticRenderFns:[]},u=t("VU/8")(d,l,!1,null,null,null).exports;n.a.use(a.a);var h=new a.a({mode:"history",routes:[{path:"/",name:"Home",component:u}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:h,components:{App:o},template:"<App/>"})},"P+zU":function(e,s){}},["NHnr"]);
//# sourceMappingURL=app.550efb8b1d6ca97d8d4a.js.map